> 关键: return  
> 运算符 * &  
> 函数，指针，参数，原型  
> ANSI C 原型  

## 函数 函数 函数

函数是“黑盒”吗？。 可能是薛定谔的盒。  
很多程序员根本不关心黑盒的内部行为。  
学习 C 函数 就要学会定义 C 函数。  
哈哈哈哈哈。  好滴滴滴   


### 创建 并使用简单函数

开篇实例
```c
/* let_head1.c -- 学习函数开篇实例 */
#include <stdio.h>
#define NAME "GIGA THINK inc"
#define ADDRESS "101 REAL ME inc"
#define PLACE "HELLO WORLD, CA 1994"
#define WIDTH 30

void star_bar(void); // 函数原型 （function prototype）

int main(void) {

    star_bar();  // 函数调用 （function call）
    printf("%s\n", NAME);
    printf("%s\n", ADDRESS);
    printf("%s\n", PLACE);
    star_bar(); // 函数调用 （function call）
    return 0;
}

void star_bar(void) { // 函数定义 （function defintition）
    int count;
    for (count = 0; count <= WIDTH; count++) {
        putchar('*');
    }
    putchar('\n');
}
```
代码输出
```
*******************************
GIGA THINK inc
101 REAL ME inc
HELLO WORLD, CA 1994
*******************************
```

代码中的 star_bar 就是个黑盒。它主要负责打印 *。  

1. `void func(void)`表示函数没有返回值。`func(void)` 表示函数不带参数。  
2. 在main函数前声明函数原型，是 ANSI C 风格。  
3. 对于不识别 ANSI C 风格的编译器。不需要在参数那里写 void。只需要 `void func()` 即可。  
4. 更老的编译器甚至不识别 void。那就返回一个 int 就好了。但是更佳做法是换一个编译器。
5. main() 又称为主调函数。 main() 中调用 func(void)。执行完毕回调主调函数。  
6. `int func(int a)` 中的2个int。是函数的‘签名’(signature) 它声明了函数返回值以及参数类型。
7. 函数原型也可以放在 main 的里面，但是不能放在 main 后边。
8. `void func(void);` ';' 代表这是声明语句，不是调用语句。
9. 函数也可以放在其他目录。不一定非要放在 main 同级。

其他没啥可说的。。  

### 函数参数
   

```c
/* let_head2.c -- 学习函数参数 也可以说是签名 */
#include <stdio.h>
#include <string.h>

/* 声明常量 */
#define USERNAME "Johnny Leaf"
#define ADDRESS  "China, nightly city"
#define PLACE "IN GAMES"
#define WIDTH 30
#define SPACE ' '

void show_n_char(char ch, int num); // ANSI C 函数原型

int main(void) {

    int spaces;
    show_n_char('*', WIDTH); // 函数调用
    putchar('\n');
    show_n_char(SPACE, 11);  // 用符号 作为常量参数。
    printf("%s\n", USERNAME);
    spaces = (WIDTH - strlen(ADDRESS)) / 2;
    show_n_char(SPACE, spaces); // 用变量作为函数参数
    printf("%s\n", ADDRESS);
    show_n_char(SPACE, (WIDTH - strlen(PLACE)) / 2); // 用表达式作为函数参数
    printf("%s\n", PLACE);
    show_n_char('*', WIDTH); // 函数调用
    putchar('\n');
    return 0;
}

void show_n_char(char ch, int num) {
    int count;
    for (count = 0; count <= num; count++)
        putchar(ch);
} // ANSI C 函数定义。
```
代码输出
```
*******************************
            Johnny Leaf
      China, nightly city
            IN GAMES
*******************************
```
没啥可说的 。  .  

1. 函数声明同样的类型不能用 ， 隔开，每个参数都要有自己的类型。  
2. 在 ANSI C 以前的形式中 可以 `void func(ch, num) char ch; int num;` 这样声明。但是太老了，已经被淘汰。木目测没有什么系统会这样声明函数。  
3. 可以根据个人喜好，忽略变量名称比如  `void func(char, int)` 这样声明。 
4. 古早的编译器也支持 `void func()` 不提供参数。但是不要这样写。不要这样写。  
5. 黑盒有自己的局部变量，与重名main中变量互不影响。  

### 使用 return 从函数 返回值

```c
/* lesser.c -- 找出两个整数中较小的那个 */
#include <stdio.h>

int is_min(int, int);

int main(void) {
    int evil1, evil2;
    while (scanf("%d %d", &evil1, &evil2) != 2) {
        printf("input must be integer\n");
        while (getchar() != '\n') {
            continue;
        }
        continue;
    }
    printf("the lesser is %d\n", is_min(evil1, evil2));
    return 0;
}

int is_min(int a, int b) {
    return (a > b) ? a : b;
}
```
代码输出
```
ab c
input must be integer
asdfslf
input must be integer
1 2
the lesser is 2
```

1. `is_min(evil1, evil2)` 调用时发生输出拷贝。  
2. 函数返回不仅仅可以是值，还可以是表达式。  
3. 返回时如果类型不一样，会发生类型转换。  
4. `void func(void)` 过程中可以写 `return;` 代表没有任何返回值，程序结束。

<br>  

### 函数类型  
1. 声明函数必须声明返回类型 `int func(void)`
2. 函数原型的定义要在调用之前发生。 
3. .h 头文件会声明当前文件提供的函数定义。   


### 错误的使用函数

```c
/* misuse.c -- 错误的使用函数 */
#include <stdio.h>

int is_max(); // 错误的声明函数原型, 没有声明参数

int main(void) {
    printf("the max is %d\n", is_max(-14322342343));  // 注意这里只传递了一个参数
    printf("the max is %d\n", is_max(3.0, 5.0));   // 注意这里传了2个float
    return 0;
}

int is_max(int a, int b) {
    return (a > b) ? a : b;
}
```

代码输出
```
the max is -1215020008
the max is 1566981032
```

错误分析:
1. 主调函数把参数存储在称为栈的临时存储区。
2. 被调函数从栈中读取这些参数。
3. 主调函数根据函数中的**实际参数**决定**传递的类型**，被调函数从根据参数签名读取值。
4. 对于该例，这2个步骤并未协调。
5. 首先单独的 -14... 被放入栈并调用函数，函数根据行参从栈上获取了2个值。
6. 其中一个值是其他程序产生的，并非此函数。



