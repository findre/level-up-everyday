# 高级数据表示
> 进一步学习 malloc()  
> 使用C表示不同的数据类型  
> 新的算法，从概念上增强抽象能力  
> 抽象数据类型 ADT  

学习吧，少年，学无止境  

## 研究数据表示  

编写一个程序，让用户输入一年内看过的所有电影(DVD 蓝光等)  

要存储每部影片的各种信息，片名，发行年份，导演 ... 

```c
/* film1.c -- 使用一个数据结构 */
#include <stdio.h>
#include <string.h>

#define T_SIZE 45 // 片名长度
#define F_MAX 5   // 影片最大数量

struct film {
    char title[T_SIZE];
    int ratting;
};

char * s_get(char * ptr, int n);

int main(void) {

    struct film movies[F_MAX];
    int i = 0;
    int j;

    puts("> Enter movie");
    while (i < F_MAX && s_get(movies[i].title, T_SIZE) != NULL && movies[i].title[0] != '\0') {
        puts("> Enter ratting");
        scanf("%d", &movies[i].ratting);
        while (getchar() != '\n')
            continue;
        i++;
        puts("> Enter movie");
    }
    if (i==0) {
        puts("> No data");
    } else {
        printf("> Here is movie list ==== > \n");
    }
    for (j=0; j<i; j++) {
        printf("%d) Movie %s Ratting is %d\n", j+1, movies[j].title, movies[j].ratting);
    }
    return 0;
}

char * s_get(char * str_ptr, int n) {
    char * ret_val;
    char * find;
    ret_val = fgets(str_ptr, n, stdin);
    if (ret_val) {
        find = strchr(str_ptr, '\n');
        if (find != NULL) {
            *find = '\0';
        } else {
            while (getchar() != '\n')
                continue;
        }
    }
    return ret_val;
}
```
代码输出

```                 
> Enter movie
泰坦尼克号
> Enter ratting
9
> Enter movie
古罗马斗兽场
> Enter ratting
9
> Enter movie
大国工匠
> Enter ratting
9
> Enter movie
那年我
> Enter ratting
9
> Enter movie
双手插兜
> Enter ratting
8
> Enter movie
> Here is movie list ==== > 
1) Movie 泰坦尼克号 Ratting is 9
2) Movie 古罗马斗兽场 Ratting is 9
3) Movie 大国工匠 Ratting is 9
4) Movie 那年我 Ratting is 9
5) Movie 双手插兜 Ratting is 8
```


