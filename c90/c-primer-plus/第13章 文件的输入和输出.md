# 文件的输入输出
>  
>  fopen()、getc()、putc()、exit() ...  
>  
>  如何使用C标准的文件输入以及输出   
>  
>  文件模式和二进制模式，文本格式和二进制模式、缓冲和无缓冲I/O
>
>  使用既可以顺序访问，也可以随机访问的文件函数
---
## 与文件进行通信

Sometimes 需要从文件中读取信息，或者把信息写到文件。  

这种文件与程序交互的过程被称为 **重定向**  

### 文件是肾？

文件通常是磁盘或者固态硬盘上一段已经命名的存储区，比如 stdio.h。  

对操作系统而言，文件更复杂一些。  

大型文件会被分开存储，并且会多额外存储一些文件属性来方便I/O  

**C语言把文件看成是一段连续的字节**，每个字节都能被单独读取，这与UNIX环境中的文件结构类似。  

### 文本形式与二进制形式

本节描述：  

1. 文本格式与二进制格式
2. 文本模式与二进制模式
3. 文本内容与二进制内容

所有文件都以二进制形式进行存储（1/0）  

如果文件最初使用二进制编码的字符（例如 ASCII 或者 UNICODE）表示文本（就像C字符串），该文件就是文本文件，其中包含文本内容  

如果文件中的二进制值代表机器语言代码或者数值数据，或图片或者音乐或视频编码，该文件就是一个二进制文件，其中包含二进制内容  

UNIX用同一种方式处理文本内容以及二进制内容，C和UNIX都适用`\n`来表示换行。  

UNIX目录包含一个统计文件大小的计数，程序可以通过它来确认是否读取到文件末尾。  

其他系统有可能与UNIX处理文本的方式不同，比如早期 OS X macintosh 用 `\r` 表示换行,  
早期 MS-DOS 用 `\r\n` 表示换行。用嵌入的`Ctrl+Z`表示文件结尾。  

有些系统会对每一行填充空字符串来让每一行的长度相同。  

为了规范文本处理，C语言提供2种模式来操作文件，二进制模式和文本模式    

文本模式中，程序所见的文件内容和文件实际的内容是不一样的  
例如在一些旧系统中，以文本模式读取文件时，C会将`\r` 或
`\r\n`替换为`\n` 在写入文本内容时，又会把`\n`替换为`\r` 或 `\r\n`  

如果编辑 **早期 OS X macintosh 早期 MS-DOS 文本，应该用二进制模式，不会发生上述转义**

### I/O 级别

底层I/O **(low-level I/O)**: 使用操作系统提供的基本 I/O 模块  
标准高层级I/O **(standard high-level I/O)**: 使用C语言提供的 stdio.h  

由于无法保证所有操作系统都使用相同的底层I/O模型，**C标准只支持标准I/O包**。  
有些实现会提供底层库，**C标准建立了可移植的I/O模型**


### 标准文件
C程序会自动打开3个文件
1. 标准输入 **(standard input)** 通常是键盘
2. 标准输出 **(standard output)** 通常为显示器
3. 标准错误输出 **(standart error output)** 通常为显示器

第8章学过通过重定向将标准输出写入到文件，而不是显示器。  

<br>  

## 标准I/O

标准I/O的好处都有啥，谁说对了就给它：

1. 标准 I/O 有许多专门的函数统一处理 I/O 问题。
2. 使用输出缓冲以及输入缓冲，一次转移大块儿信息（通常至少512字节），而不是一个字节。





